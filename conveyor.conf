# Conveyor configuration for RAKCHA JavaFX Desktop Application
# This configuration packages for Windows, macOS, and Linux

# Include JDK for packaging
include required("/stdlib/jdk/21/openjdk.conf")
include "#!=app.version mvn -q help:evaluate -Dexpression=project.version -DforceStdout"  
include required("/stdlib/jvm/javafx/from-jmods.conf")

javafx.version = 21.0.7

app {
    display-name = RAKCHA
    vendor = "RAKCHA Team"
    version = 1.0.6
    rdns-name = com.esprit.rakcha
    
    # Long description for download page
    long-description = """
        RAKCHA Desktop is the ultimate entertainment hub for managing cinemas, 
        films, series, and products. Features include:
        
        • Cinema & Film Management with IMDB integration
        • Series & Episode Tracking with favorites
        • Product Marketplace with integrated payments
        • Multi-factor Authentication (OAuth2, Face Recognition)
        • Automatic Updates via Conveyor
        • Cross-platform support (Windows, macOS, Linux)
    """

    inputs += target/RAKCHA-1.0.6.jar  
    inputs += target/classpath-jars

    # GitHub Pages URL - will be overridden in CI
    site {
        base-url = "localhost"
        
        # Customize download page
        display-name = "RAKCHA Desktop - Cinema Management Made Easy"
        
        # GitHub repository information
        # github.org = "aliammari1"
        # github.repo = "rakcha-desktop"
    }
    
    jvm {
        gui.main-class = com.esprit.MainApp
        modules = [ "detect" ]
        
        # JVM options for better performance
        options = [
            "-Xmx512m",
            "-Xms128m",
            "-XX:+UseG1GC",
            "-Dfile.encoding=UTF-8"
        ]
    }
}

# Windows-specific configuration
app.windows {
    # MSIX background color (RAKCHA brand color)
    manifests.msix.background-color = "#2196F3"
    
    # Icons
    icons = "src/main/resources/images/logo.png"
    
    # Installer options
    installer-options = [
        "--win-per-user-install",
        "--win-menu",
        "--win-shortcut"
    ]
}

# macOS-specific configuration
app.mac {
    # Info.plist customization
    info-plist {
        NSHumanReadableCopyright = "© 2025 RAKCHA Team. All rights reserved."
        CFBundleDocumentTypes = []
    }
    
    # Icons
    icons = "src/main/resources/images/logo.png"
    
    # Signing (will use provided certificate or generate self-signed)
    # signing-key = ${?MAC_SIGNING_KEY}
}

# Linux-specific configuration
app.linux {
    # Desktop file customization
    desktop-file {
        Categories = "AudioVideo;Video;Player;Database"
        Keywords = "cinema;film;movie;series;entertainment"
    }
    
    # Icons
    icons = "src/main/resources/images/logo.png"
}

# Update configuration
app.updates = aggressive  // Check for updates on every launch

# Version control
app.vcs-url = "https://github.com/aliammari1/rakcha-desktop"

# Compatibility level
conveyor.compatibility-level = 18
