<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.text.*?>
<?import org.controlsfx.control.CheckComboBox?>
<?import org.controlsfx.control.Rating?>
<?import org.kordamp.ikonli.javafx.*?>
<StackPane xmlns:fx="http://javafx.com/fxml/1" xmlns="http://javafx.com/javafx/21"
           fx:controller="com.esprit.controllers.films.FilmController"
           styleClass="immersive-root"
           stylesheets="@../styles/filmStyle.css, @../styles/film-animations.css, @../styles/login-animations.css, @../styles/dashboard.css">

  <!-- Cinematic Background with Gradient Mesh -->
  <AnchorPane fx:id="cinematicBackground" styleClass="cinematic-bg">

    <!-- Ambient Light Orbs -->
    <Circle radius="200" layoutX="150" layoutY="150" styleClass="ambient-orb orb-primary" opacity="0.15"/>
    <Circle radius="300" layoutX="1200" layoutY="600" styleClass="ambient-orb orb-secondary" opacity="0.1"/>
    <Circle radius="150" layoutX="800" layoutY="100" styleClass="ambient-orb orb-accent" opacity="0.12"/>

    <!-- Floating Cinema Elements -->
    <FontIcon iconLiteral="mdi2f-filmstrip:40" layoutX="100" layoutY="500"
              styleClass="floating-icon" opacity="0.08"/>
    <FontIcon iconLiteral="mdi2m-movie-open:35" layoutX="1300" layoutY="300"
              styleClass="floating-icon" opacity="0.06"/>
    <FontIcon iconLiteral="mdi2s-star:25" layoutX="400" layoutY="700" styleClass="floating-star" opacity="0.1"/>
    <FontIcon iconLiteral="mdi2s-star-outline:20" layoutX="950" layoutY="150"
              styleClass="floating-star" opacity="0.08"/>
  </AnchorPane>

  <!-- Main Application Shell -->
  <BorderPane styleClass="main-shell">
    <left>
      <fx:include source="/ui/sidebar.fxml"/>
    </left>

    <center>
      <!-- Main Content -->
      <VBox spacing="20" style="-fx-background-color: transparent;">
        <padding>
          <Insets top="25" right="25" bottom="25" left="25"/>
        </padding>

        <!-- Header -->
        <HBox spacing="15" alignment="CENTER_LEFT" styleClass="immersive-header">
          <Label text="Movie Management" style="-fx-text-fill: white;" styleClass="brand-title">
            <font>
              <Font name="Arial Rounded MT Bold" size="32.0"/>
            </font>
          </Label>
          <Region HBox.hgrow="ALWAYS"/>
          <TextField fx:id="searchField" prefHeight="42.0" prefWidth="248.0"
                     promptText="Search movies..." styleClass="search-input"/>
          <Button mnemonicParsing="false" styleClass="glass-btn">
            <graphic>
              <FontIcon iconLiteral="mdi2m-magnify:20"/>
            </graphic>
          </Button>
        </HBox>

        <!-- Content Area -->
        <HBox spacing="20" VBox.vgrow="ALWAYS">
          <!-- Left Side - Movie Form -->
          <VBox spacing="15" styleClass="glass-panel" maxWidth="450.0">
            <padding>
              <Insets top="20" right="20" bottom="20" left="20"/>
            </padding>

            <GridPane vgap="15" hgap="10">
              <columnConstraints>
                <ColumnConstraints minWidth="120" prefWidth="120"/>
                <ColumnConstraints hgrow="ALWAYS"/>
              </columnConstraints>

              <!-- Title -->
              <Label text="Title:" GridPane.rowIndex="0" GridPane.columnIndex="0" styleClass="label-light">
                <font>
                  <Font size="16.0"/>
                </font>
              </Label>
              <TextField fx:id="tfNom" styleClass="text-field-red"
                         GridPane.rowIndex="0" GridPane.columnIndex="1"/>

              <!-- Description -->
              <Label text="Description:" GridPane.rowIndex="1" GridPane.columnIndex="0" styleClass="label-light">
                <font>
                  <Font size="16.0"/>
                </font>
              </Label>
              <TextArea fx:id="taDescription" styleClass="text-area-red"
                        GridPane.rowIndex="1" GridPane.columnIndex="1" prefRowCount="3"/>

              <!-- Category -->
              <Label text="Category:" GridPane.rowIndex="2" GridPane.columnIndex="0" styleClass="label-light">
                <font>
                  <Font size="16.0"/>
                </font>
              </Label>
              <CheckComboBox fx:id="checkComboBoxCategory" styleClass="check-combo-box"
                             GridPane.rowIndex="2" GridPane.columnIndex="1" maxWidth="Infinity"/>

              <!-- Actors -->
              <Label text="Actors:" GridPane.rowIndex="3" GridPane.columnIndex="0" styleClass="label-light">
                <font>
                  <Font size="16.0"/>
                </font>
              </Label>
              <CheckComboBox fx:id="checkComboBoxActor" styleClass="check-combo-box"
                             GridPane.rowIndex="3" GridPane.columnIndex="1" maxWidth="Infinity"/>

              <!-- Cinemas -->
              <Label text="Cinemas:" GridPane.rowIndex="4" GridPane.columnIndex="0" styleClass="label-light">
                <font>
                  <Font size="16.0"/>
                </font>
              </Label>
              <CheckComboBox fx:id="checkComboBoxCinema" styleClass="check-combo-box"
                             GridPane.rowIndex="4" GridPane.columnIndex="1" maxWidth="Infinity"/>

              <!-- Duration -->
              <Label text="Duration (min):" GridPane.rowIndex="5" GridPane.columnIndex="0" styleClass="label-light">
                <font>
                  <Font size="16.0"/>
                </font>
              </Label>
              <TextField fx:id="tfDuree" styleClass="text-field-red"
                         GridPane.rowIndex="5" GridPane.columnIndex="1"/>

              <!-- Release Year -->
              <Label text="Release Year:" GridPane.rowIndex="6" GridPane.columnIndex="0" styleClass="label-light">
                <font>
                  <Font size="16.0"/>
                </font>
              </Label>
              <TextField fx:id="tfReleaseYear" styleClass="text-field-red"
                         GridPane.rowIndex="6" GridPane.columnIndex="1"/>

              <!-- Rating -->
              <Label text="Rating:" GridPane.rowIndex="7" GridPane.columnIndex="0" styleClass="label-light">
                <font>
                  <Font size="16.0"/>
                </font>
              </Label>
              <Rating fx:id="ratingControl" styleClass="rating-control"
                      GridPane.rowIndex="7" GridPane.columnIndex="1"/>

              <!-- Trailer -->
              <Label text="Trailer URL:" GridPane.rowIndex="8" GridPane.columnIndex="0" styleClass="label-light">
                <font>
                  <Font size="16.0"/>
                </font>
              </Label>
              <TextField fx:id="tfBandeAnnonce" styleClass="text-field-red"
                         GridPane.rowIndex="8" GridPane.columnIndex="1"/>

              <!-- Poster -->
              <Label text="Poster:" GridPane.rowIndex="9" GridPane.columnIndex="0" styleClass="label-light">
                <font>
                  <Font size="16.0"/>
                </font>
              </Label>
              <VBox spacing="10" GridPane.rowIndex="9" GridPane.columnIndex="1">
                <ImageView fx:id="imageFilm" fitHeight="150.0" fitWidth="200.0"
                           pickOnBounds="true" preserveRatio="true"/>
                <Button onAction="#importFilmImage" styleClass="secondary-button"
                        text="Upload Poster"/>
              </VBox>
            </GridPane>

            <!-- Action Buttons -->
            <HBox spacing="10" alignment="CENTER">
              <Button onAction="#insertFilm" styleClass="hero-btn primary" text="+ Create Movie">
                <graphic>
                  <FontIcon iconLiteral="mdi2p-plus-circle:20"/>
                </graphic>
              </Button>
            </HBox>
          </VBox>

          <!-- Right Side - Movies List -->
          <VBox HBox.hgrow="ALWAYS" spacing="15">
            <TableView fx:id="tvFilms" VBox.vgrow="ALWAYS" styleClass="table-view-dark">
              <columns>
                <TableColumn fx:id="colTitre" text="Title"/>
                <TableColumn fx:id="colDescription" text="Description"/>
                <TableColumn fx:id="colCategorie" text="Category"/>
                <TableColumn fx:id="colDuree" text="Duration"/>
                <TableColumn fx:id="colDate" text="Release Date"/>
                <TableColumn fx:id="colNote" text="Rating"/>
                <TableColumn fx:id="colBandeAnnonce" text="Trailer"/>
                <TableColumn fx:id="colImage" text="Poster"/>
                <TableColumn fx:id="colAction" text="Action"/>
              </columns>
            </TableView>
          </VBox>
        </HBox>
      </VBox>
    </center>
  </BorderPane>
</StackPane>
