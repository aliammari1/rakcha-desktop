<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.text.Font?>
<?import org.kordamp.ikonli.javafx.FontIcon?>

<StackPane xmlns:fx="http://javafx.com/fxml/1" prefHeight="855.0"
           prefWidth="1507.0"
           stylesheets="@../styles/dashboard.css, @../styles/film-animations.css, @../styles/produitStyle.css"
           styleClass="immersive-root"
           xmlns="http://javafx.com/javafx/21"
           fx:controller="com.esprit.controllers.products.ListOrderController">

  <!-- Cinematic Background -->
  <AnchorPane fx:id="cinematicBackground" styleClass="cinematic-bg">
    <Circle radius="350" layoutX="1300" layoutY="200" styleClass="ambient-orb orb-primary" opacity="0.15"/>
    <Circle radius="250" layoutX="200" layoutY="700" styleClass="ambient-orb orb-secondary" opacity="0.12"/>
    <FontIcon iconLiteral="mdi2f-file-document-outline:40" layoutX="100" layoutY="100" styleClass="floating-icon" opacity="0.08"/>
  </AnchorPane>

  <BorderPane styleClass="main-shell">
    <left>
      <fx:include source="/ui/sidebar.fxml"/>
    </left>

    <center>
      <VBox spacing="20" style="-fx-background-color: transparent;">
        <padding>
            <Insets top="25" right="25" bottom="25" left="25"/>
        </padding>

        <!-- Header -->
        <HBox spacing="15" alignment="CENTER_LEFT" styleClass="immersive-header">
           <Label text="Orders List" style="-fx-text-fill: white;" styleClass="brand-title">
             <font>
               <Font name="Arial Rounded MT Bold" size="32.0"/>
             </font>
           </Label>
           <Region HBox.hgrow="ALWAYS"/>

           <!-- Search Box -->
           <HBox styleClass="glass-panel" alignment="CENTER_LEFT" spacing="10" style="-fx-padding: 5 15;">
               <FontIcon iconLiteral="mdi2m-magnify:20:gray"/>
               <TextField fx:id="SearchBar" promptText="Search orders..." styleClass="search-input" prefWidth="250"/>
           </HBox>

           <Button styleClass="glass-btn" onAction="#toggleFilter">
             <graphic>
               <FontIcon fx:id="idfilter" iconLiteral="mdi2f-filter:20:white"/>
             </graphic>
             <tooltip>
               <Tooltip text="Filter Orders"/>
             </tooltip>
           </Button>
        </HBox>

        <!-- Content Area -->
        <HBox spacing="20" VBox.vgrow="ALWAYS">

          <!-- Orders Table Container -->
          <StackPane styleClass="glass-panel" HBox.hgrow="ALWAYS">
             <TableView fx:id="orderTableView" styleClass="table-view-dark" VBox.vgrow="ALWAYS">
                <columnResizePolicy>
                   <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                </columnResizePolicy>
                <columns>
                  <TableColumn fx:id="idnom" text="First Name"/>
                  <TableColumn fx:id="idprenom" text="Last Name"/>
                  <TableColumn fx:id="idadresse" text="Address"/>
                  <TableColumn fx:id="idnumero" text="Phone"/>
                  <TableColumn fx:id="iddate" text="Date"/>
                  <TableColumn fx:id="idStatu" text="Status"/>
                  <TableColumn fx:id="deleteColumn" text="Action"/>
                </columns>
              </TableView>
          </StackPane>

          <!-- Right Side Panel -->
          <VBox spacing="15" maxWidth="320.0" minWidth="280.0">
            <!-- Status Filter -->
            <VBox spacing="15" styleClass="glass-panel">
              <padding>
                <Insets top="20" right="20" bottom="20" left="20"/>
              </padding>

              <Label text="Filter by Status" styleClass="section-subtitle" style="-fx-text-fill: white; -fx-font-weight: bold;"/>

              <ComboBox fx:id="statusComboBox" maxWidth="Infinity" styleClass="glass-combo" promptText="Select Status"/>
            </VBox>

            <!-- Statistics -->
            <VBox spacing="15" styleClass="glass-panel" VBox.vgrow="ALWAYS">
              <padding>
                <Insets top="20" right="20" bottom="20" left="20"/>
              </padding>

              <Label text="Orders Overview" styleClass="section-subtitle" style="-fx-text-fill: white; -fx-font-weight: bold;"/>

              <Label text="Track your order history and status here." wrapText="true" style="-fx-text-fill: #cccccc;"/>

              <Region VBox.vgrow="ALWAYS"/>

              <Button onAction="#statOrder" styleClass="hero-btn, primary" maxWidth="Infinity" text="View Statistics">
                 <graphic>
                    <FontIcon iconLiteral="mdi2c-chart-bar:20:white"/>
                 </graphic>
              </Button>
            </VBox>
          </VBox>
        </HBox>
      </VBox>
    </center>
  </BorderPane>

  <!-- Filter Dialog Overlay -->
  <StackPane fx:id="filterAnchor" visible="false" style="-fx-background-color: rgba(0,0,0,0.7);">
      <VBox spacing="20" styleClass="glass-panel" maxWidth="400" maxHeight="300" alignment="CENTER">
          <padding>
            <Insets top="30" right="30" bottom="30" left="30"/>
          </padding>
          <Label text="Advanced Filters" style="-fx-text-fill: white; -fx-font-size: 20px; -fx-font-weight: bold;"/>

          <!-- Filter content here (simplified as original was empty) -->
          <Label text="Filter options will appear here." style="-fx-text-fill: gray;"/>

          <HBox spacing="10" alignment="CENTER">
             <Button styleClass="glass-btn" text="Cancel" onAction="#closeFilter"/>
             <Button styleClass="hero-btn, primary" text="Apply Filter"/>
          </HBox>
      </VBox>
  </StackPane>
</StackPane>
